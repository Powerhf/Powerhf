<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'app/css/style.css' %}">
    <link rel=”stylesheet” href=”https://use.fontawesome.com/releases/v5.7.0/css/all.css”
        integrity=”sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ” crossorigin=”anonymous”>
    <title>PowerHF • Documents Repository Add / Update</title>
</head>

<body>
    <div id="loader" class="center"></div>
    <div class="container-fluid p-0">
        <div class="card border-0 bg-card">
            <div class="container upper-body-tag p-0" style="width: 100%;">
                <div class="card border-0 top-card sticky-top">
                    {% include 'app/upper_navbar.html' %}
                </div>
                <div class="card border-0 right-middel-card mt-4 mb-5 p-3">
                    <div class="mt-3 mb-3">
                        <div class="headings mb-5" style="padding-left: 15px;">
                            <div class="headings mb-4">
                                <h5 class="fw-normal">PHF Projects Repository</h5>
                            </div>
                        </div>
                        {% if messages %}
                        {% for msg in messages %}
                        <div class="card {{msg.tags}} mb-5 p-2" id="Error-close"
                            style="margin-left: 0.8rem; margin-right: 1.5rem;">
                            <div class="d-flex">
                                <div class="inr-success-int1" style="width: 100%; padding-top: 4;">
                                    <span>{{msg}}</span>
                                </div>
                                <div class="inr-success-int2">
                                    <button class="btn-close-err-msg" id="btncloseerrmsg" onclick="BtnErrorClose()">
                                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512"
                                            class="text-dark">
                                            <path fill="#545454"
                                                d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                        {% endif %}
                        <form action="{% url 'documentsrepository_add_update' instance.pk %}" method="POST" class="m-3" enctype="multipart/form-data" id="myForm">
                            {% csrf_token %}
                            <div class="erger-56ty">
                                <div class="row row-cols-1 row-cols-md-2 g-3 mb-5">
                                    <div class="col">
                                        <div class="mb-3">
                                            <label class="mb-2 label_input">Project Type</label>
                                            <select name="project_type" class="inputformsfill">
                                                <option value="Feul Pump Automation Work For Gilbarco" {% if instance.project_type == 'Feul Pump Automation Work For Gilbarco' %}selected{% endif %}>Feul Pump
                                                    Automation Work
                                                    For Gilbarco</option>
                                                <option value="DG RNR, For ATC, Ascend, TVI" {% if instance.project_type == 'DG RNR, For ATC, Ascend, TVI' %}selected{% endif %}>DG RNR, For ATC, Ascend,
                                                    TVI
                                                </option>
                                                <option value="EV Charger I&C, PM & BDN Calls For Gilbarco" {% if instance.project_type == 'EV Charger I&C, PM & BDN Calls For Gilbarco' %}selected{% endif %}>EV Charger
                                                    I&C, PM &
                                                    BDN Calls For Gilbarco</option>
                                                <option value="Retail DG Repair" {% if instance.project_type == 'Retail DG Repair' %}selected{% endif %}>Retail DG Repair</option>
                                                <option value="5G Upgradation For ATC" {% if instance.project_type == '5G Upgradation For ATC' %}selected{% endif %}>5G Upgradation For ATC</option>
                                                <option value="FTTH For Microscan" {% if instance.project_type == 'FTTH For Microscan' %}selected{% endif %}>FTTH For Microscan</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="mb-3">
                                            <label class="mb-2 label_input">Region</label>
                                            <select name="region" class="inputformsfill">
                                                <option value="East" {% if instance.region == 'East' %}selected{% endif %}>East</option>
                                                <option value="West" {% if instance.region == 'West' %}selected{% endif %}>West</option>
                                                <option value="North" {% if instance.region == 'North' %}selected{% endif %}>North</option>
                                                <option value="South" {% if instance.region == 'South' %}selected{% endif %}>South</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="mb-3">
                                            <label class="mb-2 label_input">Circles</label>
                                            <select name="circles" class="inputformsfill">
                                                <option value="JK" {% if instance.circles == 'JK' %}selected{% endif %}>JK</option>
                                                <option value="UPE" {% if instance.circles == 'UPE' %}selected{% endif %}>UPE</option>
                                                <option value="UPW" {% if instance.circles == 'UPW' %}selected{% endif %}>UPW</option>
                                                <option value="HP, HR & PB" {% if instance.circles == 'HP, HR & PB' %}selected{% endif %}>HP, HR & PB</option>
                                                <option value="DL" {% if instance.circles == 'DL' %}selected{% endif %}>DL</option>
                                                <option value="MU, MH & GJ" {% if instance.circles == 'MU, MH & GJ' %}selected{% endif %}>MU, MH & GJ</option>
                                                <option value="RJ & MP" {% if instance.circles == 'RJ & MP' %}selected{% endif %}>RJ & MP</option>
                                                <option value="CG" {% if instance.circles == 'CG' %}selected{% endif %}>CG</option>
                                                <option value="AS & NE" {% if instance.circles == 'AS & NE' %}selected{% endif %}>AS & NE</option>
                                                <option value="WB & KOL" {% if instance.circles == 'WB & KOL' %}selected{% endif %}>WB & KOL</option>
                                                <option value="OD" {% if instance.circles == 'OD' %}selected{% endif %}>OD</option>
                                                <option value="JH" {% if instance.circles == 'JH' %}selected{% endif %}>JH</option>
                                                <option value="BH" {% if instance.circles == 'BH' %}selected{% endif %}>BH</option>
                                                <option value="AP & TS" {% if instance.circles == 'AP & TS' %}selected{% endif %}>AP & TS</option>
                                                <option value="TN" {% if instance.circles == 'TN' %}selected{% endif %}>TN</option>
                                                <option value="KN" {% if instance.circles == 'KN' %}selected{% endif %}>KN</option>
                                                <option value="KL" {% if instance.circles == 'KL' %}selected{% endif %}>KL</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="mb-3">
                                            <label class="mb-2 label_input">Site ID / Document IDe</label>
                                            <input type="text" name="site_docs_id" class="inputformsfill" value="{{instance.site_docs_id}}">
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="mb-3">
                                            <label class="mb-2 label_input">Documents</label>
                                            <input type="file" class="mon-box-img-input" name="documents_dt" multiple
                                                accept="*/*">
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="mb-3 mt-4 mb-3 p-3" style="height: 8rem; overflow: auto;">
                                            {% if docs_data %}
                                            <div class="gegrtg-5g5f54">
                                                <ol class="gergr5">
                                                    {% for docs in docs_data %}
                                                    {% if docs.documents.all %}
                                                    {% for do in docs.documents.all %}
                                                    <li style="font-size: 12px;" class="mb-2">
                                                        <div class="row row-cols-2 row-cols-md-2 g-3 mb-2">
                                                            <div class="col-md-9">
                                                                <a href="{{do.files.url}}" target="_blank"
                                                                    class="text-decoration-none text-secondary">{{do.files.url}}</a>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <form action="" method="POST">
                                                                    {% csrf_token %}
                                                                    <button type="submit" class="btn btn-danger"
                                                                        style="font-size: 7px; font-weight: 550;">Remove</button>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </li>
                                                    {% endfor %}
                                                    {% endif %}
                                                    {% endfor %}
                                                </ol>
                                            </div>
                                            {% else %}
                                            <div class="no-docs-4f4">
                                                <h6 class="text-danger mt-4 pt-3 text-center" style="font-size: 10px;">
                                                    No
                                                    Documents
                                                    Attached</h6>
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="button_for_form_filling mt-5 text-end mb-4" style="margin-right: 1rem;">
                                <button type="submit" class="btn-filling_data" id="submit_btn">
                                    <span id="gj7uj86">Update</span>
                                    <div id="loading-bar" style="display: none;">
                                        <div class="spinner-border spinner-border-sm text-light" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                    </div>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            {% include 'app/offcanvas_down.html' %}
        </div>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
            integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
            crossorigin="anonymous"></script>
        <script src="{% static 'app/js/style.js' %}"></script>
        <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
        <script>
            document.onreadystatechange = function () {
                if (document.readyState !== "complete") {
                    document.querySelector(
                        "body").style.visibility = "hidden";
                    document.querySelector(
                        "#loader").style.visibility = "visible";
                } else {
                    document.querySelector(
                        "#loader").style.display = "none";
                    document.querySelector(
                        "body").style.visibility = "visible";
                }
            };
        </script>
        <script>
            $(document).ready(function () {
                $('#myForm').submit(function () {
                    $(".btn-filling_data").prop("disabled", true);
                    $('#loading-bar').show();
                    $('#gj7uj86').hide();
                });
            });
        </script>
</body>

</html>
